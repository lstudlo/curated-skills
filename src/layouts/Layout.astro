---
import '../styles/global.css';
import ThemeToggle from '../components/ThemeToggle.astro';

interface Props {
  title?: string;
  description?: string;
}

const {
  title = 'Curated Skills',
  description = 'A public index of coding-agent skills with downloadable source files.',
} = Astro.props as Props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content={description} />
		<title>{title}</title>
    <script is:inline>
      (() => {
        const STORAGE_KEY = 'curated-skills-theme';
        try {
          const saved = localStorage.getItem(STORAGE_KEY);
          const resolved =
            saved === 'light' || saved === 'dark'
              ? saved
              : window.matchMedia('(prefers-color-scheme: dark)').matches
                ? 'dark'
                : 'light';
          document.documentElement.classList.toggle('dark', resolved === 'dark');
          document.documentElement.dataset.theme = resolved;
        } catch {
          // Ignore localStorage access errors and fall back to CSS media queries.
        }
      })();
    </script>
	</head>
	<body class="min-h-screen bg-white text-zinc-950 dark:bg-black dark:text-zinc-100">
    <div class="relative min-h-screen">
      <div class="pointer-events-none absolute inset-0 opacity-70 dark:opacity-40">
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_0%,rgba(0,0,0,0.06),transparent_45%),radial-gradient(circle_at_80%_100%,rgba(0,0,0,0.05),transparent_50%)] dark:bg-[radial-gradient(circle_at_20%_0%,rgba(255,255,255,0.09),transparent_45%),radial-gradient(circle_at_80%_100%,rgba(255,255,255,0.06),transparent_50%)]"></div>
        <div class="absolute inset-0 [background-image:linear-gradient(to_right,rgba(0,0,0,0.045)_1px,transparent_1px),linear-gradient(to_bottom,rgba(0,0,0,0.045)_1px,transparent_1px)] [background-size:28px_28px] dark:[background-image:linear-gradient(to_right,rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(to_bottom,rgba(255,255,255,0.05)_1px,transparent_1px)]"></div>
      </div>

      <header class="sticky top-0 z-20 border-b border-zinc-200/70 bg-white/75 backdrop-blur-xl dark:border-zinc-800 dark:bg-black/70">
        <div class="mx-auto flex w-full max-w-7xl items-center justify-between gap-4 px-4 py-4 sm:px-6">
          <a href="/" class="group min-w-0">
            <div class="truncate text-[11px] tracking-[0.2em] text-zinc-500 uppercase">
              Public Repository
            </div>
            <div class="font-serif text-xl leading-none tracking-tight group-hover:opacity-80 sm:text-2xl">
              Curated Skills
            </div>
          </a>

          <div class="flex items-center gap-2">
            <a
              href="/#skills"
              class="hidden rounded-full border border-zinc-300/80 px-3 py-1.5 text-xs tracking-[0.16em] uppercase hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-900 sm:inline-flex"
            >
              Browse
            </a>
            <ThemeToggle />
          </div>
        </div>
      </header>

      <main class="relative z-10 mx-auto w-full max-w-7xl px-4 py-8 sm:px-6 sm:py-10">
        <slot />
      </main>

      <footer class="relative z-10 border-t border-zinc-200/70 bg-white/70 dark:border-zinc-800 dark:bg-black/60">
        <div class="mx-auto flex w-full max-w-7xl flex-col gap-2 px-4 py-5 text-xs text-zinc-500 sm:px-6 md:flex-row md:items-center md:justify-between">
          <p>Minimal public browser for coding-agent skills.</p>
          <p class="font-mono">Astro + Tailwind</p>
        </div>
      </footer>
    </div>
	</body>
</html>
